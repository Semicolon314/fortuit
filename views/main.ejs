<!DOCTYPE html>
<html ng-app="FortuitApp">
  <head>
    <title>Fortuit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="lib/components-font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script>
      var user = {name: "<%= user.name %>", id: "<%= user._id %>"};
    </script>
    <script src="lib/angular/angular.js"></script>
    <script src="/javascripts/main.js"></script>
  </head>
  <body ng-controller="MainCtrl">
    <div id="navBar" onselectstart="return false;">
      <div>
        <img class='logo' src="/images/logo.svg" width=150>
      </div>
      <i class="fa fa-home" ng-class="{selected: view == 'home'}" ng-click="setView('home')"></i>
      <i class="fa fa-archive" ng-class="{selected: view == 'archive'}" ng-click="setView('archive')"></i>
      <i class="fa fa-bar-chart" ng-class="{selected: view == 'data'}" ng-click="setView('data')"></i>
      <i class="fa fa-group" ng-class="{selected: view == 'group'}" ng-click="setView('group')"></i>
      <span style="float: right">
        <%= user.name %>
        <i class="fa fa-sign-out" ng-click="logout()"></i>
      </span>
    </div>
    <div class="view" ng-show="view == 'home'">
      <form novalidate>
        <div>
          <textarea placeholder="New prediction" ng-model="new_prediction_desc"></textarea>
        </div>
        <div>
          <label>True: </label>
          <span ng-repeat="confidence in confidences">
            <button ng-click="submit(confidence)">{{ confidence }}</button>
          </span>
        </div>
        <div>
          <label>False: </label>
          <span ng-repeat="confidence in confidences">
            <button ng-click="submit(100-confidence)">{{ confidence }}</button>
          </span>
        </div>
      </form>
      <div class="prediction" ng-repeat="prediction in predictions">
        <b>{{ prediction.affair.desc.length > 0 ? prediction.affair.desc : "Prediction " + prediction.created }}</b><br>
        {{ prediction.percent }}% chance of occuring.
      </div>
    </div>
    <div class="view" ng-show="view == 'archive'">
      <div class="prediction" ng-repeat="prediction in predictions">
        <b>{{ prediction.affair.desc.length > 0 ? prediction.affair.desc : "Prediction " + prediction.created }}</b><br>
        {{ prediction.percent }}% chance of occuring.
      </div>
    </div>
    <div class="view" ng-show="view == 'data'">
      <h1>Data</h1>
    </div>
    <div class="view" ng-show="view == 'group'">
      <h1>Friends</h1>
    </div>
  </body>
</html>
